<div class="row">
    <div class="offset-md-3 col-md-6 offset-lg-4 col-lg-4 position-relative">
        <%= form_with url: search_users_path, method: :post do |form| %>
            <%= 
                form.text_field :username,
                value: params["username"], 
                class: "form-control",
                placeholder: "Kullanıcı Ara", id: "search_user_input" %>
            <%= form.submit class: "d-none", id: "submit_button" %>
        <% end %>
        <i class="bi bi-x-circle-fill position-absolute" style="right:20px;top:7px;cursor:pointer" id="clear_input_icon"></i>
    </div>
</div>

<script>
    var clearInputIcon = document.getElementById("clear_input_icon")
    var submitButton = document.getElementById("submit_button");
    var searchUserInput = document.getElementById("search_user_input");

    if(searchUserInput.value == "")
        clearInputIcon.style.display = "none"

    searchUserInput.addEventListener("input",() => {
        if(searchUserInput.value == "")
            clearInputIcon.style.display = "none"
        else
            clearInputIcon.style.display = "inline"
        submitButton.click()
    });

    clearInputIcon.addEventListener("click", () => {
        searchUserInput.value = ""
        clearInputIcon.style.display = "none"
        submitButton.click()
    });
</script>

